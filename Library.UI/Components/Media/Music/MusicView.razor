@inherits ViewBase

<Library.UI.Components.Elements.LoadableContent Loading="@(Music == null)">
    @if (editMode)
    {
        <i class="bi breadcrumb-item" @onclick="TurnOffEditMode" />
        <MusicEditForm EditableMusicModel="editableMusic" IsCreate="false" OnClose="OnClose" OnSuccess="ModifiedEntryAsync" />
    }
    else if (Music != null)
    {
        if (Music.Image != null && Music.Image.Length > 0)
        {
            <img src="@($"data:image/png;base64,{Convert.ToBase64String(Music.Image)}")" alt="Uploaded Image" class="img-thumbnail" />
        }
        <i class="bi bi-pencil-square position-absolute end-0 p-2" @onclick="EnableEditMode" />

        <div class="p-2 d-flex flex-column gap-4">
            <div class="row">
                <div class="d-flex flex-row">
                    <h1 class="fit-content me-3"> @Music.Title</h1>
                    <h4 class="fit-content">@Music.Stars <i class="bi bi-star" /></h4>
                </div>
                <h4 class="fit-content">
                    @Music.Album
                </h4>
            </div>
            <div class="row d-flex flex-row">
                @if (!String.IsNullOrWhiteSpace(Music.Artist))
                {
                    <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                        <small class="text-muted">Artist</small>
                        <small class="text-muted text-nowrap">@Music.Artist</small>
                    </div>
                }
                @if (!String.IsNullOrWhiteSpace(Music.Language))
                {
                    <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                        <small class="text-muted">Language</small>
                        <small class="text-muted text-nowrap">@Music.Language</small>
                    </div>
                }
                @if (!String.IsNullOrWhiteSpace(@Music.Composer))
                {
                    <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                        <small class="text-muted bi bi-pen" />
                        <small class="text-muted">@Music.Composer</small>
                    </div>
                }
                @if (Music.DateReleased != null)
                {
                    <div class="col-2 d-flex flex-column justify-content-center  align-items-center">
                        <small class="text-muted bi bi-calendar-month"/>
                        <small class="text-muted text-nowrap">@Music.DateReleased?.ToString("MMMM yyyy")</small>
                    </div>
                }
                <div class="col-1 d-flex flex-column justify-content-center  align-items-center">
                    <small class="text-muted">Listened</small>
                    <small class="text-muted text-nowrap">@Music.TimesListenedTo</small>
                </div>
            </div>
            <div class="row">
                <span>@(String.Join(',', Music.Genre))</span>
            </div>
        </div>
        
    }
</Library.UI.Components.Elements.LoadableContent>